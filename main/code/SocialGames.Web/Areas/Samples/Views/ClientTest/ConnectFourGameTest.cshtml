@using Microsoft.Samples.SocialGames.Web.Areas.Samples.Extensions;

@{
    ViewBag.Title = "TicTacToeGame Test";
}

<link href="@Url.Content("~/Content/qunit.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/qunit.js")" type="text/javascript"></script>
<script src="@Url.AreaContent("Scripts/game/ConnectFourGame.js")" type="text/javascript"></script>


<h1 id="qunit-header">ConnectFourGame Tests</h1>

<h2 id="qunit-banner"></h2>
<div id="qunit-testrunner-toolbar"></div>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture">test markup, will be hidden</div>

<script type="text/javascript">
    $(function () {
        test("Create Empty Board", function () {
            var game = new ConnectFourGame(6, 6);

            for (var x = 0; x < 6; x++)
                for (var y = 0; y < 6; y++)
                    ok(game.isEmpty(x, y));

            equal(game.isTie(), false);
            equal(game.hasWinner(), false);
        });

        test("Valid Moves on Empty Board", function () {
            var game = new ConnectFourGame(6, 6);

            for (var x = 0; x < 6; x++) {
                ok(game.isValid(x, C4Color.Cross));
                ok(game.isValid(x, C4Color.Circle));
            }
        });

        test("First Moves on Empty Board", function () {
            var game = new ConnectFourGame(6, 6);

            for (var x = 0; x < 6; x++) {
                game.move(x, C4Color.Cross);
                equal(game.getColor(x, 5), C4Color.Cross);
                ok(game.isEmpty(x, 4));
                game.move(x, C4Color.Circle);
                equal(game.getColor(x, 4), C4Color.Circle);
                ok(game.isEmpty(x, 3));
            }
        });

        test("Second Moves on Empty Board", function () {
            var game = new ConnectFourGame(6, 6);

            for (var x = 0; x < 6; x++) {
                game.move(x, C4Color.Cross);
                game.move(x, C4Color.Cross);
                game.move(x, C4Color.Cross);
                equal(game.getColor(x, 5), C4Color.Cross);
                equal(game.getColor(x, 4), C4Color.Cross);
                equal(game.getColor(x, 3), C4Color.Cross);
                ok(game.isEmpty(x, 2));
            }

            equal(game.getWinner(), C4Color.Cross);
        });
    });
</script>

